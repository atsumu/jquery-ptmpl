(function(a){function h(b){return b.replace(/\\/g,"\\\\").replace(/\r?\n\t*/g,"\\n").replace(/\'/g,"\\'").replace(/\"/g,'\\"')}a.fn.ptmpl=function(b,e){a.isArray(b)||(b=[b]);var c=[],d=this[0];a.each(b,function(){c.push(a.ptmplGetCompiled(d,e)(e,this))});var f=document.createElement("div");f.innerHTML=c.join("");return a(i(f.childNodes))};a.ptmpl=function(b,e,c){return a.fn.ptmpl.apply([{id:null,innerHTML:b}],[e,c])};a.ptmplDefineTag=function(b){a.each(b,function(b,c){a.ptmplTagTable[b]=c})};a.ptmplUndefineTag=
function(b){a.each(b,function(b,c){delete a.ptmplTagTable[c]})};a.ptmplCompile=function(b,e,c){e||(e={});var d=[];e.noDebugInfo||d.push("try {");d.push("var _PTMPL_HTML = [];");d.push("with ($.ptmplScope(_PTMPL_ARG)) {");b.replace(/((?:a|[^a])*?)(?:\{\{((?:a|[^a])*?)\}\}|$)/g,function(b,c,f){c&&(b=a.ptmplTranslateHtmlToLiteral(c))&&d.push('_PTMPL_HTML.push("',b,'");');f&&(f.match(/([^\s\(]+)((?:a|[^a])*)/),a.ptmplTagTable[RegExp.$1](d,RegExp.$2,e))});d.push("}");d.push('return _PTMPL_HTML.join("");');
e.noDebugInfo||(d.push("} catch (e) {"),d.push('throw new Error("RuntimeError in '+a.ptmplEscapeStringLiteral(c.id?c.id:c.text.slice(0,100))+', "+e.message);'),d.push("}"));b=d.join("");e.debug&&console.log("code:",b);try{var f=new Function("_PTMPL_OPTION","_PTMPL_ARG",b)}catch(g){throw e.noDebugInfo||(g.message+=" in "+(c.id?c.id:c.text.slice(0,100))),g;}return f};a.ptmplGetCompiled=function(b,e){var c=b.id,d=b.innerHTML;if(c){if(c in a.ptmplCache)return a.ptmplCache[c];if(d)return a.ptmplCache[c]=
a.ptmplCompile(d,e,{id:"#"+c});d=document.getElementById(c).innerHTML;return a.ptmplCache[c]=a.ptmplCompile(d,e,{id:"#"+c})}return a.ptmplCompile(d,e,{text:d})};a.ptmplEscapeHtml=function(b){return(b?b.toString():""+b).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&#039;")};a.ptmplUnescapeHtml=function(b){return(b?b.toString():""+b).replace(/&#039;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&")};
a.ptmplEscapeUrl=encodeURIComponent;a.ptmplEscapeStringLiteral=h;a.ptmplTranslateHtmlToLiteral=h;a.ptmplScope=function(b){function a(){}a.prototype=b;return new a};a.ptmplCache={};a.ptmplTagTable={};var i=a.makeArray||function(b){return Array.prototype.slice.call(b,0)};a.ptmplDefineTag({html:function(b,a){b.push("_PTMPL_HTML.push((",a,"));")},"=":function(b,a){b.push("_PTMPL_HTML.push($.ptmplEscapeHtml((",a,")));")},"~":function(b,a){b.push("_PTMPL_HTML.push($.ptmplEscapeUrl((",a,")));")},$:function(b,
a){b.push(a)},"!":function(){},"//":function(){}});var g;a.ptmplDefineTag({"if":function(b,a){b.push("if (",a,") {")},el:g=function(b,a){a?b.push("} else if (",a,") {"):b.push("} else {")},"else":g,"/if":function(b){b.push("}")}});a.ptmplDefineTag({tryif:function(b,a){b.push("if ((function () { try { return (",a,"); } catch (e) {} })()) {")},catchelse:g=function(b,a){a?b.push("} else if ((function () { try { return (",a,"); } catch (e) {} })()) {"):b.push("} else {")},"/tryif":function(b){b.push("}")}});
a.ptmplDefineTag({"for":function(b,a){b.push("for (",a,") {")},"/for":function(b){b.push("}")}});a.ptmplDefineTag({each:function(b,a){if(null==a.match(/\s*\((?:\s*(\w+)\s*(?:,\s*(\w+)\s*))\)\s+((?:a|[^a])+)/))throw"ptmpl syntax error: near {{each"+a+"}}";b.push("$.each((",RegExp.$3,"), function (",RegExp.$1,",",RegExp.$2,") {")},"/each":function(b){b.push("});")},"continue":function(b){b.push("return true;")},"break":function(b){b.push("return false;")}});a.ptmplDefineTag({tmpl:function(b,a){if(null==
a.match(/\s*\(((?:a|[^a])*?)\)\s+((?:a|[^a])+)/))throw"ptmpl syntax error: near {{tmpl"+a+"}}";var c=RegExp.$1||"{}",d=RegExp.$2,f=d.match(/^\s*['"]#(.+?)["']\s*$/)&&RegExp.$1;f?b.push('_PTMPL_HTML.push($.ptmplGetCompiled({ id:"',f,'" }, _PTMPL_OPTION)(_PTMPL_OPTION, (',c,")));"):b.push("_PTMPL_HTML.push($.ptmplGetCompiled($.find((",d,"))[0], _PTMPL_OPTION)(_PTMPL_OPTION, (",c,")));")}});a.ptmplStripPluginTranslateFunctionStack=[];a.ptmplDefineTag({strip:function(){var b=a.ptmplTranslateHtmlToLiteral;
a.ptmplStripPluginTranslateFunctionStack.push(b);a.ptmplTranslateHtmlToLiteral=function(a){return b(a.replace(/\r?\n\t*/g,""))}},"/strip":function(){a.ptmplTranslateHtmlToLiteral=a.ptmplStripPluginTranslateFunctionStack.pop()}})})(window.jQuery||window.Zepto);
